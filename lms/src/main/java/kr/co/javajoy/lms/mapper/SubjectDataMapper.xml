<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.javajoy.lms.mapper.SubjectDataMapper">

<select id="selectSubjectDataListByPage"
		parameterType="java.util.Map"
		resultType="java.util.Map">
	SELECT 
		s.subject_data_no subjectDataNo
		,s.member_id memberId
		,t.teacher_name teacherName
		,subject_data_title subjectDataTitle
		,subject_data_content subjectDataContent
		,s.create_date createDate
	FROM subject_board sb
		INNER JOIN subject_data s
			ON sb.subject_board_no = s.subject_data_no
		INNER JOIN teacher t 
			ON s.member_id = t.member_id
	WHERE sb.subject_no = #{subjectNo}
	<if test='searchName != null and !"".equals(searchName) '>
		AND CONCAT('%', s.subject_data_title, '%') 
		LIKE CONCAT('%', #{searchName}, '%')
	</if>
	LIMIT #{beginRow}, #{rowPerPage}
</select>

<select id="selectTotalCount" 
		parameterType="String"
		resultType="int" >
	SELECT COUNT(*)
	FROM subject_data
	<if test='searchName != null and !"".equals(searchName) '>
		WHERE CONCAT('%', subject_data_title, '%') 
		LIKE CONCAT('%', #{searchName}, '%')
	</if>
</select>

</mapper>